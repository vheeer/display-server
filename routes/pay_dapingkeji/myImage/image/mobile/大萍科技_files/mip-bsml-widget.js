function getRandom(){for(var e=1e7,t=Math.random()*e;t<e;)t<<=1;return t}window.pvtrace=0,window.pvid=(new Date).getTime()+""+getRandom(),define("mip-bsml-widget/mip-bsml-widget",["require","zepto","util","performance","customElement"],function(e){function t(){if(window.customStorage)return window.customStorage;if(u.customStorage){var e=u.customStorage;window.customStorage=new e(0)}else window.customStorage={get:function(e){return window[e]},set:function(e,t){window[e]=t}};return window.customStorage}function i(){var e=t(),i=location.search.replace("?","").split("&");return c.each(i,function(t,i){var n=i.split("=");if("channel_id"===n[0])return window.bsmlChannel=n[1],e.set("bsmlChannel",window.bsmlChannel,1800),!1}),window.bsmlChannel=e.get("bsmlChannel"),window.bsmlChannel}function n(){if(window.bsmlCuid)return window.bsmlCuid;var e=t(),i=e.get("bsmlCuid");if(!i)i=getRandom(),i=""+(new Date).getTime()+i,e.set("bsmlCuid",i,2592e3);return window.bsmlCuid=i,window.bsmlCuid}function r(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);if(null!=i)return unescape(i[2]);else return null}function a(e){if(e&&!window.disableBsmlLog){var t=r("extra_info");if(t)t=t.split("&");var a={};if(t)for(var s=0;s<t.length;s++)a[t[s].split("=")[0]]=t[s].split("=")[1];try{if("string"==typeof e)e=JSON.parse(e);var l=c("#pageinfo"),u={action_id:e.action_id?e.action_id:"site_comp_click",action_name:e.action_name?e.action_name:"普通组件点击",guid:l.attr("guid"),appid:l.attr("appid")||"",ucid:l.attr("ucid")||"",site_id:l.attr("siteid"),channel_id:i(),time_stamp:Math.round((new Date).getTime()/1e3),page_name:l.attr("pagename"),page_type:l.attr("pagetype"),refer:encodeURIComponent(document.referrer),url:encodeURIComponent(location.href),cuid:n(),extra:{},page_id:l.attr("pageid"),group_id:a.group_id||"",idea_id:r("IDEA_ID")||"",extra_idea_id:a.idea_id||""},h=this.element;if(c(h).children().attr("data-log")){var d=JSON.parse(c(h).children().attr("data-log"));c.extend(u.extra,d)}switch(u.action_id){case"site_page_show":u.extra.micro_time=(new Date).getTime();break;case"site_first_screen":u.extra.micro_time=(new Date).getTime(),u.extra.time_used=e.extra.time_used;break;case"site_bar_click":if(u.extra.type=e.type,"tel"===e.type||"msg"===e.type||"follow"===e.type)u.extra.target=e.target;if("msg"===e.type)u.extra.uuid=e.uuid;if("download"===e.type)u.extra.target=e.target||"",u.extra.click_target=e.click_target||"";if("navigate"===e.type||"tel"===e.type)u.extra.city_name=e.city_name||"",u.extra.baiduid=e.baiduid||"";break;case"site_comp_click":if(u.extra=o(e,h),e.extra&&e.extra.tag)u.extra.tag=e.extra.tag;break;case"site_comp_show":case"site_comp_hide":if(u.extra.comp_id=c(h).attr("id"),u.extra.comp_name=c(h).attr("name"),u.extra.comp_type=c(h).attr("type"),u.extra.micro_time=(new Date).getTime(),e.extra&&e.extra.tag)u.extra.tag=e.extra.tag;break;case"site_page_quit":u.extra.stayed_millisecond=(new Date).getTime()-window.startTime;break;case"site_activity_click":u.extra.comp_id=c(h).parent().attr("id"),u.extra.comp_name=c(h).parent().attr("name"),u.extra.comp_type=c(h).parent().attr("type"),u.extra.micro_time=(new Date).getTime(),u.extra.activity_click_type=e.activity_click_type,u.extra.bizid=e.bizId;break;case"site_page_roll":u.extra.document_length=e.document_length,u.extra.window_height=e.window_height,u.extra.window_width=e.window_width,u.extra.stayed_millisecond=(new Date).getTime()-window.scrollTime-f,window.scrollTime=(new Date).getTime()}u.extra.pvtrace=++window.pvtrace,u.extra.pvid=window.pvid,u.extra=JSON.stringify(u.extra);var m=p+"?"+c.param(u),g=new Image;g.src=m}catch(e){}}}function o(e,t){var i=null;if(e.name&&e.type&&e.id&&e.sub_action)i={comp_id:e.id,comp_name:e.name,comp_type:e.type,sub_action:e.sub_action,video_id:e.video_id,video_length:e.video_length};else i={comp_id:c(t).attr("id"),comp_name:c(t).attr("name"),comp_type:c(t).attr("type")};return i}function s(){if(window.styleFixed||u.platform.getOsVersion(),0){window.styleFixed=!0;var e='a,hr{padding:0}a,button,input,select,textarea{margin:0}article,aside,details,figure,footer,header,hr,main,nav,section,summary{display:block}abbr,address,article,aside,audio,b,blockquote,body,body div,caption,cite,code,dd,del,details,dfn,dl,dt,em,fieldset,figure,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,p,pre,q,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font-weight:400;vertical-align:baseline;background:0 0}input[type=checkbox],th{vertical-align:bottom}html{box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}embed,img,object{max-width:100%}ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:’’;content:none}a{font-size:100%;vertical-align:baseline;background:0 0}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted #000;cursor:help}th{font-weight:700}td{font-weight:400;vertical-align:top}hr{height:1px;border:0;border-top:1px solid #ccc;margin:1em 0}input,select{vertical-align:middle}pre{white-space:pre;white-space:pre-wrap;white-space:pre-line;word-wrap:break-word}input[type=radio]{vertical-align:text-bottom}.ie7 input[type=checkbox]{vertical-align:baseline}.ie6 input{vertical-align:text-bottom}input,select,textarea{font:99% sans-serif}table{border-collapse:separate;border-spacing:0;font:100%}small{font-size:85%}strong{font-weight:700}td,td img{vertical-align:top}sub,sup{font-size:75%;line-height:0;position:relative}sup{top:-.5em}sub{bottom:-.25em}code,kbd,pre,samp{font-family:monospace,sans-serif}.clickable,button,input[type=button],input[type=file],input[type=submit],label{cursor:pointer}button,input[type=button]{width:auto;overflow:visible}.ie7 img{-ms-interpolation-mode:bicubic}.clearfix:after{content:" ";display:block;clear:both}',t=document.createElement("style");t.type="text/css",t.innerHTML=e,document.getElementsByTagName("HEAD").item(0).appendChild(t)}}function l(e){var t=e.type.replace("book","form"),i={type:t,action_id:"site_bar_click",action_name:"转化组件点击"};a.call(this,i)}window.startTime=window.scrollTime=(new Date).getTime();var c=e("zepto"),u=e("util"),h=e("performance"),d=e("customElement").create(),p="https://isite.baidu.com/v.gif",f=400;return h.on("update",function(e){if(e.MIPFirstScreen){var t=e.MIPFirstScreen-e.MIPStart,i={action_id:"site_first_screen",action_name:"首屏展现",extra:{time_used:t}};a(i),setTimeout(function(){for(var e=document.querySelectorAll("mip-img"),t=0,i=e.length;t<i;t++)MIP.prerenderElement(e[t])},200)}}),window.addLog=a,d.prototype.build=function(){var e=this.element,t=this,i=c(document).height(),n=c(window).height(),r=c(window).width();c(".body-wrapper").css({minHeight:n+"px"});var o=c(e).attr("name")||c(e).attr("data-name"),u=o.indexOf("-bar")>-1?!0:!1,h=o.indexOf("-nichang")>-1?!0:!1;if(c(e).on("click","[data-click]",function(){var e=c(this).attr("data-click");if(e){var i=JSON.parse(e);if(!u||"book"!==i.type&&"msg"!==i.type&&"tel"!==i.type)if(h)return void l.call(t,i);else return void a.call(t,e)}}),c(e).on("click",function(){a.call(t,"{}")}),!window.bsmlLog){window.bsmlLog=1,s();var d='{"action_id":"site_page_show","action_name":"页面渲染"}';a.call(t,d)}window.onunload=function(){var e='{"action_id":"site_page_quit","action_name":"页面退出打点"}';a.call(t,e)};var p=null;window.onscroll=function(){if(p)clearTimeout(p);var e='{"action_id":"site_page_roll","action_name":"页面滚动打点","document_length":"'+i+'","window_height":"'+n+'","window_width":"'+r+'"}';p=setTimeout(function(){a.call(t,e)},f)}},d.prototype.viewportCallback=function(e){var t=this,i="";if(this.viewportTimer&&!e)return clearTimeout(this.viewportTimer),void(this.viewportTimer=null);else return void(this.viewportTimer=setTimeout(function(){if(t.viewportTimer=null,e)i='{"action_id":"site_comp_show","action_name":"普通组件展现"}',a.call(t,i);else i='{"action_id":"site_comp_hide","action_name":"普通组件隐藏"}',a.call(t,i)},50))},d}),define("mip-bsml-widget",["mip-bsml-widget/mip-bsml-widget"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-bsml-widget",t)}if(window.MIP)require(["mip-bsml-widget"],function(t){e(window.MIP,t)});else require(["mip","mip-bsml-widget"],e)}();