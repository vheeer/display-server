define("mip-bsml-fixedbar/mip-bsml-fixedbar",["require","customElement","zepto","util"],function(t){function i(t,i,e){o.ajax({url:i,type:e,data:t,cache:!1,dataType:"jsonp",success:function(t){if("string"==typeof t.data)window.randomval=t.data}})}function e(t){var i=JSON.stringify(t);window.addLog(i)}var s=t("customElement").create(),o=t("zepto"),n=t("util"),r=n.platform,a=2,h="http://isite.baidu.com/feedflow/form/jumpto?";return s.prototype.build=function(){var t=this,s=t.element,n=o(window).height(),l=o("#pageinfo"),c=l.attr("siteid"),p=l.attr("pagename"),d=l.attr("pagetype"),u=l.attr("pageid"),f=l.attr("appid"),m=l.attr("ucid"),g=document.referrer,v={};if(v.pageid=u,v.merchantid=o(s).find(".bsml-form-list-submit").attr("data-ucid"),v.siteid=c,v.prod=a,v.appid=f,v.clkid=window.pvid,2===+v.appid){var b={page:1,detail:2,serviceDetail:3,caseDetail:4};v.prod=b[p],v.merchantid=m,v.pvid=window.pvid}o(s).find(".mip-bsml-fixed-bar-box-phone a").css({display:"block"});var x=o(s).parents(".mip-element.mip-layout-container"),y=x.last().parent().is(".body-wrapper");i({siteid:c,appid:f,referer:encodeURIComponent(g)},"https://isite.baidu.com/feedflow/page/setPageClickInfo","get"),i({},"https://isite.baidu.com/feedflow/form/randomval","get"),o(s).on("click",".mip-bsml-fixed-bar-box-appointment",function(){if(o(".body-wrapper").css({overflow:"hidden",height:n}),o(s).find(".bsml-form-lay").fadeIn("fast").css({height:n}),o(this).attr("data-id"))o(s).find(".bsml-form").hide(),o(s).find(".bsml-form[data-id="+o(this).attr("data-id")+"]").show(),o(s).find(".bsml-form").filter("[data-id="+o(this).attr("data-id")+"]").animate({bottom:"0"},"fast");else o(s).find(".bsml-form").animate({bottom:"0"},"fast");if(r.isIos()&&y)o("body").children("div").not(".body-wrapper").not("script").hide(),o(s).css("position","static"),x.css("position","static"),o(".body-wrapper").css("box-sizing","border-box"),o(s).find(".bsml-form").css("position","absolute");window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+c+"/"+u+"/"+p+"/"+d+"/appointment"]);var t={action_id:"site_bar_click",action_name:"转化组件点击",type:"book"};e(t)});var w=".mip-bsml-fixed-bar-box-consult, .mip-bsml-fixed-bar-three-box-consult, .mip-bsml-fixed-bar-two-box-consult";o(s).on("click",w,function(){window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+c+"/"+u+"/"+p+"/"+d+"/consult"]);var t=o(this).find("a").attr("href")||"",s=""+window.randomval+(new Date).getTime();v.jsonval={contact_url:encodeURIComponent(t)},v.type=2,i(v,"https://isite.baidu.com/feedflow/form/submit","post");var n={action_id:"site_bar_click",action_name:"转化组件点击",type:"msg",target:t,uuid:s};return e(n),location.href=h+"targeturl="+encodeURIComponent(t)+"&randomval="+s+"&referurl="+encodeURIComponent(window.location.href),!1});var S=".mip-bsml-fixed-bar-box-phone, .mip-bsml-fixed-bar-three-box-phone, .mip-bsml-fixed-bar-two-box-phone";o(s).on("click",S,function(){window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+c+"/"+u+"/"+p+"/"+d+"/phone"]);var t=o(this).find("a").attr("href").substr(4)||"";v.jsonval={phone_num:t},v.type=0,i(v,"https://isite.baidu.com/feedflow/form/submit","post");var s={action_id:"site_bar_click",action_name:"转化组件点击",type:"tel",target:t};e(s)}),o(s).on("touchend",".bsml-form-close",function(t){if(t.preventDefault(),o(".body-wrapper").css({overflow:"initial"}),o(s).find(".bsml-form-lay").hide(),r.isIos()&&y)o("body").children().not(".body-wrapper").not("script").show(),o(s).find(".bsml-form").css("position","fixed");o(s).find(".bsml-form").animate({bottom:"-800px"},"fast")}),o(s).on("click",".bsml-form-lay",function(){if(o(".body-wrapper").css({overflow:"initial"}),o(s).find(".bsml-form-lay").hide(),r.isIos()&&y)o("body").children("div").not(".body-wrapper").not("script").show(),o(s).find(".bsml-form").css("position","fixed");o(s).find(".bsml-form").animate({bottom:"-800px"},"fast")})},s}),define("mip-bsml-fixedbar",["mip-bsml-fixedbar/mip-bsml-fixedbar"],function(t){return t}),function(){function t(t,i){t.registerMipElement("mip-bsml-fixedbar",i)}if(window.MIP)require(["mip-bsml-fixedbar"],function(i){t(window.MIP,i)});else require(["mip","mip-bsml-fixedbar"],t)}();